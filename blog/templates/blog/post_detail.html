{% extends 'blog/base.html' %}
{% load static %}


{% block content %}
    <div class="post">
        {% if post.published_date %}
            <div class="date">
                {{ post.published_date }}
            </div>
        {% endif %}
        {% if user.is_authenticated %}
        <h2>{{ post.title }} <a class="btn btn-default" href="{% url 'post_edit' pk=post.pk %}">
            <span class="glyphicon glyphicon-pencil"></span></a> </h2>      
        {% endif %}
        <p>{{ post.text|linebreaksbr }}</p>
        <p>Author: {{post.author | linebreaksbr }}</p>
    </div>
        
    <div class="comment">
        <br>
        <p><strong>Comentários: 
        {% if user.is_authenticated %}
            <span class="glyphicon glyphicon-plus"></span>
        <form method="POST" class="comment-form">{% csrf_token %} <!-- csrf_token: segurança do form -->
            {{ form.as_p }} <!--chamar o formulário para mostrar no template, tag do django (Form is rendered as paragraphs in the template)-->
            <button type="submit" class="save btn btn-default">Save</button>
        </form> <!-- tag html form : <form></form> -->
        {% endif %}</strong></p>
        {% for item in comment %}
            <p>Comentário: {{item.text |linebreaksbr }}</p>
            <p>Autor(a): {{ item.author|linebreaksbr }}</p>
            <p>Post: {{item.post}}</p>
            <div class="date">
                <p>Data de criação: {{ item.created_date|linebreaksbr }}</p>
                <br><hr>  
            </div>
        {% endfor %}
    </div>
        
{% endblock %}
